@model GoCanvasAPI.ViewModel.RootObject
@{
    ViewData["Title"] = "Index";
}

@*<script type="text/javascript" src="js/script.js"></script>*@
@*<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>*@

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

@*<div class="container">
        @using (@Html.BeginForm("IndexPost", "Home", FormMethod.Post))
        {
            <button type="submit" name="submit" class="btn btn-default" onclick="location.href='@Url.Action("IndexPost", "Home")'">Form Data</button>
        }

    </div>*@

@if (ViewBag.SuccessMsg != null)
{
    @*<div class="modal" tabindex="-1" id="successModal"
             data-keyboard="false" data-backdrop="static" style="display:block;">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            ×
                        </button>
                    </div>
                    <div class="modal-body">
                        @if (ViewBag.SuccessMsg == true)
                        {
                            <p>All Data Parsed Successfully....</p>
                        }
                        else
                        {
                            <p>Error Occured Due to Parse the data...</p>
                        }
                    </div>
                </div>
            </div>
        </div>*@

    @if (ViewBag.SuccessMsg == false)
    {
        <div class="alert alert-danger alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>

            <strong><span class="glyphicon glyphicon-remove"></span> There are errors: </strong>
            @*<ul>
                    @foreach (String message in errorList)
                    {
                        <li>@Html.Raw(message)</li>
                    }
                </ul>*@

        </div>
    }
    <!-- display success -->
    @if (ViewBag.SuccessMsg == true)
    {
        <div class="alert alert-success alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>

            <strong><span class="glyphicon glyphicon-ok"></span> Record Inserted Successfully !!!!!! </strong>
            @*<ul>
                    @foreach (String message in successList)
                    {
                        <li>@Html.Raw(message)</li>
                    }
                </ul>*@

        </div>
    }
}
<div class="container">
    <div class="row"></div>

    @using (@Html.BeginForm("Index", "Home", FormMethod.Post))
    {
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        FormData Information Retrival
                    </div>
                    <div class="panel-body">
                        @if (Model != null && Model.Forms.Form.Count >= 1)
                        {
                            <div class="row">
                                <div class="col-sm-12">
                                    <table class="table table-bordered table-condensed table-striped">
                                        <thead>
                                            <tr>
                                                <th>Id</th>
                                                <th>Name</th>
                                                <th>Status</th>
                                                <th>Version</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Forms.Form)
                                            {
                                                <tr>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Id)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Name.text)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Status.text)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Version.text)
                                                    </td>
                                                    <td>
                                                        @*<button type="submit" name="GetSubmissionData" id="getSubmissionData" onclick="location.href='@Url.Action("Details", "Home", new { formname = item.Name.text })'">Submission Data</button>*@
                                                        <button type="submit" name="GetSubmissionData" id="getSubmissionData" onclick="location.href='@Url.Action("Details", "Home", new { formname = item.Name.text })'">Submission Data</button>
                                                       
                                                    </td>
                                                </tr>
                                            }


                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        }
                    </div>
                    @*<div class="panel-footer">
                        </div>*@
                </div>
            </div>
        </div>
        @*<div class="row">
            <div class="col-sm-6">
                <button type="submit" name="submit" class="btn btn-primary" onclick="location.href='@Url.Action("IndexPost", "Home")'">Form Data</button>
            </div>
        </div>*@
    }
</div>

@*@if (Model != null && Model.Count() >= 1)
    {
        <div class="container">
            <table class="table">
                <thead>
                <th>Id</th>
                <th>Name</th>
                <th>Status</th>
                <th>Version</th>
                <th>Action</th>
                </thead>
                <tbody>
                    @foreach (var item in Model.FirstOrDefault().Forms.Form)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Name.text)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Status.text)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Version.text)
                            </td>
                            <td>
                                <button type="submit" name="GetSubmissionData" id="getSubmissionData" onclick="location.href='@Url.Action("Details", "Home", new { formname=item.Name.text})'">Submission Data</button>
                            </td>
                        </tr>
                    }


                </tbody>
            </table>
        </div>

    }*@

<script type="text/javascript">

    $(document).ready(function () {
        //$('.close').click(function (e) {
        //    $('#successModal').remove();
        //});

    //    $(".close").on('click', function () {
    //        //$(this).closest(".modal").modal('hide');
    //        $('#successModal').hide();
    //        // $("#successModal").css("display", "none");
    //    });
    });

    //function sendClick(name) {
    //    // var id = $(ctl).data("id");

    //    // Store product id in hidden field
    //   // var refdatasetname = $("#referencedatasetname").val();

    //    // Call Web API to get a list of Products
    //    var formName = name;
    //    var formData = new FormData();
    //    formData.append("formName", JSON.stringify(formName));
    //    //formData.append("attachment", $("#fileupload")[0].files[0]);
    //    var array = [1, 2, 3, 4, 5];

    //    $.ajax('/Home/Index', {
    //        //type: 'POST',  // http method
    //        //data: { collection: formData },  // data to submit
    //        method: 'post',
    //        processData: false,
    //        contentType: false,
    //        cache: false,
    //        data: formData,
    //        enctype: 'multipart/form-data',
    //        success: function (data, status, xhr) {
    //            alert(data);
    //        },
    //        error: function (jqXhr, textStatus, errorMessage) {
    //            alert(errorMessage);
    //        }
    //    });
    //}

</script>
